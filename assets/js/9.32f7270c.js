(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{465:function(e,t,a){"use strict";a.r(t);var s=a(29),r=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("p",[e._v("鸿蒙设备开发环境需要同事使用到 Windows 系统和 Linux 系统环境，常见的做法是用 Windows 系统搭配 Ubuntu 虚拟机搭建环境。最近华为牵头搞得 openEuler 操作系统上线了微软应用商店作为 WSL 子系统，利用 WSL-openEuler 搭配 Windows 同样可以搭建鸿蒙设备开发环境，实现在“欧拉上开发鸿蒙”的效果。本文将讲述环境搭建的全流程。")]),e._v(" "),a("h2",{attrs:{id:"_1-安装-wsl"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装-wsl"}},[e._v("#")]),e._v(" 1 安装 WSL")]),e._v(" "),a("h3",{attrs:{id:"_1-1-先决条件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-先决条件"}},[e._v("#")]),e._v(" 1.1 先决条件")]),e._v(" "),a("p",[e._v("必须运行 Windows 10 版本 2004 及更高版本（内部版本 19041 及更高版本）或 Windows 11。")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("提示")]),e._v(" "),a("p",[e._v("若要检查 Windows 版本及内部版本号，选择 Windows 徽标键 + R，然后键入“winver”，选择“确定” 。 可通过选择“开始”>“设置”>“Windows 更新”>“检查更新”来更新到最新的 Windows 版本。")])]),e._v(" "),a("h3",{attrs:{id:"_1-2-安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-安装"}},[e._v("#")]),e._v(" 1.2 安装")]),e._v(" "),a("h4",{attrs:{id:"_1-2-1-开启-wsl2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-1-开启-wsl2"}},[e._v("#")]),e._v(" 1.2.1 开启 WSL2")]),e._v(" "),a("p",[e._v("按"),a("Badge",{attrs:{text:"win",type:"tip",vertical:"middle"}}),e._v(" + "),a("Badge",{attrs:{text:"x",type:"tip",vertical:"middle"}}),e._v("，使用管理员模式打开 power shell， 输入如下命令开启 WSL 功能：")],1),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart\n")])])]),a("p",[e._v("接下来输入如下命令启用虚拟机功能：")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart\n")])])]),a("p",[e._v("完成后需要重新启动电脑。完成后需要下载 WSL 的 Linux 内核更新包，下载地址为："),a("a",{attrs:{href:"https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi",target:"_blank",rel:"noopener noreferrer"}},[e._v("适用于 x64 计算机的 WSL2 Linux 内核更新包"),a("OutboundLink")],1),e._v("。下载完成后双击运行，根据提示进行选择即可完成安装。接下来需要启用 WSL2 功能，")]),e._v(" "),a("p",[e._v("按"),a("Badge",{attrs:{text:"win",type:"tip",vertical:"middle"}}),e._v(" + "),a("Badge",{attrs:{text:"x",type:"tip",vertical:"middle"}}),e._v("，使用管理员模式打开 power shell， 输入如下命令：")],1),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("wsl --set-default-version "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("2")]),e._v("\n")])])]),a("p",[e._v("出现如下提示，说明 WSL 已安装并配置完成。")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("有关与 WSL "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("2")]),e._v(" 的主要区别的信息，请访问 https://aka.ms/wsl2\n操作成功完成。\n")])])]),a("h4",{attrs:{id:"_1-2-2-安装-openeuler-发行版"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-2-安装-openeuler-发行版"}},[e._v("#")]),e._v(" 1.2.2 安装 openEuler 发行版")]),e._v(" "),a("p",[e._v("接下来需要选择要安装的发行版。")]),e._v(" "),a("p",[e._v("打开 Windows 应用商店，在其中搜索 "),a("strong",[e._v("openEuler")]),e._v("。如下图所示：")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/laomao1997/FigureBed/main/search-openEuler-in-Microsoft-Store.png",alt:"search-openEuler-in-Microsoft-Store"}})]),e._v(" "),a("p",[e._v("进入 openEuler 页面，如下图所示。点击"),a("Badge",{attrs:{text:"安装",type:"tip",vertical:"middle"}}),e._v("按钮，即可开始安装 openEuler 发行版，稍等片刻即可安装完毕。")],1),e._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/laomao1997/FigureBed/main/install-openEuler-in-Microsofr-store.png",alt:"install-openEuler-in-Microsofr-store"}})]),e._v(" "),a("p",[e._v("完成安装后，在开始菜单中，可以找到 openEuler 图标，点击即可打开 WSL openEuler 发行版。")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/laomao1997/FigureBed/main/installed-openEuler.png",alt:"installed-openEuler"}})]),e._v(" "),a("p",[e._v("打开后的 WSL openEuler 发行版命令行窗口,稍等片刻，会出现如下图所示的提示。")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/laomao1997/FigureBed/main/image-20220425012529966.png",alt:"image-20220425012529966"}})]),e._v(" "),a("p",[e._v("此时需要我们输入自己的 Linux 用户名，输入完成后按回车。会出现下图提示，要求我们输入自己的 Linux 密码，这里需要输入两次。需要注意的是，在输入密码时，不会在窗口中显示出来。两次输入完成后，出现如下如图所示提示：")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/laomao1997/FigureBed/main/image-20220425014438180.png",alt:"image-20220425014438180"}})]),e._v(" "),a("p",[e._v("这样就完成了 WSL2 及 openEuler 发行版的安装。")]),e._v(" "),a("h2",{attrs:{id:"_2-将-openeuler-迁移到自定义目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-将-openeuler-迁移到自定义目录"}},[e._v("#")]),e._v(" 2 将 openEuler 迁移到自定义目录")]),e._v(" "),a("p",[e._v("通过微软应用商店安装的 openEuler 默认安装到 C 盘，占用 C 盘空间。在使用过程中，WSL 占用空间会越来越大，很容易让 C 盘爆满，所以我们需要将其迁移到其他非 C 盘的地方，有两种方式完成这一步骤。")]),e._v(" "),a("h3",{attrs:{id:"方法一-通过-wsl-命令迁移"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#方法一-通过-wsl-命令迁移"}},[e._v("#")]),e._v(" 方法一 通过 WSL 命令迁移")]),e._v(" "),a("p",[e._v("首先按"),a("Badge",{attrs:{text:"win",type:"tip",vertical:"middle"}}),e._v(" + "),a("Badge",{attrs:{text:"x",type:"tip",vertical:"middle"}}),e._v("，使用管理员模式打开 power shell， 输入如下命令终止正在运行的 WSL：")],1),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("wsl --shutdown\n")])])]),a("p",[e._v("接下来需要将需要迁移的发行版导出，首先输入")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("wsl -l\n")])])]),a("p",[e._v("该命令将会列出当前系统中安装的所有 WSL 发行版。如下图所示：")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/laomao1997/FigureBed/main/image-20220425015938143.png",alt:"image-20220425015938143"}})]),e._v(" "),a("h3",{attrs:{id:"方法二-通过-lxrunoffline-工具迁移"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#方法二-通过-lxrunoffline-工具迁移"}},[e._v("#")]),e._v(" 方法二 通过 LxRunOffline 工具迁移")]),e._v(" "),a("p",[e._v("首先需要下载LxRunOffline压缩包，下载地址为："),a("a",{attrs:{href:"https://ddosolitary-builds.sourceforge.io/LxRunOffline/LxRunOffline-v3.5.0-11-gfdab71a-msvc.zip",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://ddosolitary-builds.sourceforge.io/LxRunOffline/LxRunOffline-v3.5.0-11-gfdab71a-msvc.zip"),a("OutboundLink")],1),e._v("。")]),e._v(" "),a("p",[e._v("下载后解压，之后进入解压出的文件夹中，在LxRunOffline.exe所在目录下以管理员身份打开Windows命令行。之后输入如下命令：")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("./lxrunoffline list\n")])])]),a("p",[e._v("这样会列出当前计算机上安装的所有WSL，由于刚刚安装了openEuler，所以该命令应当可以将openEuler列出。接下来，可以输入如下命令，进行迁移：")]),e._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("./lxrunoffline move -n openEuler -d D:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("WSL-openEuler\n")])])]),a("p",[e._v("注意这个命令有两个参数：")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("-n")]),e._v(" 参数，这里写的是openEuler，指要迁移的WSL发行版，如果要迁移其他发行版，那么这个参数需要填写对应发行版的名称，具体名称可以通过上一个 "),a("code",[e._v("list")]),e._v(" 命令查看；")]),e._v(" "),a("li",[a("code",[e._v("-d")]),e._v(" 参数，这个参数指的是要迁移到的目标路径，这里是放到D盘的 "),a("code",[e._v("WSL-openEuler")]),e._v(" 文件夹下，如果想迁移到不同文件夹，修改改路径即可。")])]),e._v(" "),a("p",[e._v("之后稍等一段时间，时间可能较长，具体时间取决于计算机配置。当迁移成功后，可以在目标路径下，找到WSL的vhdx文件，大小有数G。如下图所示：")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/laomao1997/FigureBed/main/20220502035919.png",alt:""}})]),e._v(" "),a("p",[e._v("这样就完成了WSL的迁移。")]),e._v(" "),a("h2",{attrs:{id:"_3-为-openeuler-wsl-映射盘符"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-为-openeuler-wsl-映射盘符"}},[e._v("#")]),e._v(" 3 为 openEuler WSL 映射盘符")]),e._v(" "),a("p",[e._v("打开“计算机”，在地址栏中输入："),a("code",[e._v("//wsl.localhost")]),e._v("。可以打开WSL目录，里面会展示当前计算机安装的所有WSL发行版。")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/laomao1997/FigureBed/main/20220502041333.png",alt:""}})]),e._v(" "),a("p",[e._v("在“openEuler”上点击右键，选择“映射网络驱动器”，打开如下窗口，选择“完成”即可。")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/laomao1997/FigureBed/main/20220502041435.png",alt:""}})]),e._v(" "),a("p",[e._v("这样就完成了WSL虚拟盘符的映射，打开“计算机”即可看到映射出来的盘符如下图：")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/laomao1997/FigureBed/main/20220502041552.png",alt:""}})]),e._v(" "),a("p",[e._v("双击盘符，即可进入WSL-openEuler文件目录。如下图所示：")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/laomao1997/FigureBed/main/20220502041637.png",alt:""}})])])}),[],!1,null,null,null);t.default=r.exports}}]);